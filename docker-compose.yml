
version: '3'

services:

  manticore:
    container_name: manticore
    image: manticoresearch/manticore
    environment:
      - EXTRA=1
    restart: always
    ports:
      - 127.0.0.1:9306:9306
      - 127.0.0.1:9308:9308
    # ulimits:
    #   nproc: 65535
    #   nofile:
    #      soft: 65535
    #      hard: 65535
    #   memlock:
    #     soft: -1
    #   hard: -1
# environment:	
#   - EXTRA=1
    volumes:
      - manticore_data:/var/lib/manticore
#      - ./manticore.conf:/etc/manticoresearch/manticore.conf # uncommment if you use a custom config

  db:
    image: mysql/mysql-server:8.0.32-1.2.11-server
    restart: always
    environment:
      MYSQL_DATABASE: 'db'
      MYSQL_USER: 'user'
      MYSQL_PASSWORD: 'password'
      MYSQL_ROOT_PASSWORD: 'password'
    ports:
      - '3306:3306'
    expose:
      - '3306'
    volumes:
      - my-db:/var/lib/mysql
volumes:
  my-db:
  manticore_data:
#     external: true